# 环境配置

## centos7搭建环境

### docker配置

#### 1.安装docker

```shell
yum install docker -y
```

#### 2.启动和关闭Docker

```shell
service docker start
service docker stop
```

#### 3.查看docker镜像列表

 ```shell
 docker images
 ```

#### 4.查看正在运行的容器

```shell
docker ps/docker ps -a
```

#### 4.移除镜像

```shell
docker rmi 镜像名字
```

#### 5.移除容器

```shell
docker rm -f 容器名
```



### docker安装MySQL

### 1.拉取镜像

 ```shell
 docker run \
 --name mysql \
 -d \
 -p 3306:3306 \
 --restart unless-stopped \
 -v /mydata/mysql/log:/var/log/mysql \
 -v /mydata/mysql/data:/var/lib/mysql \
 -v /mydata/mysql/conf:/etc/mysql \
 -e MYSQL_ROOT_PASSWORD=123456 \
 mysql:8.0.23
 ```

#### 2.创建MySQL容器(创建4个MySQL容器)

 ```shell
 docker run -it -d --name mysql1 -p 12001:3306 \
 --net mynet --ip 172.18.0.2 \
 -m 400m -v /root/mysql1/data:/var/lib/mysql \
 -v /root/mysql1/config:/etc/mysql/conf.d \
 -e MYSQL_ROOT_PASSWORD=123456 \
 -e TZ=Asia/Shanghai --privileged=true \
 mysql:8.0.23 \
 --lower_case_table_names=1
 
 docker run -it -d --name mysql2 -p 12002:3306 \
 --net mynet --ip 172.18.0.3 \
 -m 400m -v /root/mysql2/data:/var/lib/mysql \
 -v /root/mysql2/config:/etc/mysql/conf.d \
 -e MYSQL_ROOT_PASSWORD=123456 \
 -e TZ=Asia/Shanghai --privileged=true \
 mysql:8.0.23 \
 --lower_case_table_names=1
 
 docker run -it -d --name mysql3 -p 12003:3306 \
 --net mynet --ip 172.18.0.4 \
 -m 400m -v /root/mysql3/data:/var/lib/mysql \
 -v /root/mysql3/config:/etc/mysql/conf.d \
 -e MYSQL_ROOT_PASSWORD=123456 \
 -e TZ=Asia/Shanghai --privileged=true \
 mysql:8.0.23 \
 --lower_case_table_names=1
 
 docker run -it -d --name mysql4 -p 12004:3306 \
 --net mynet --ip 172.18.0.5 \
 -m 400m -v /root/mysql4/data:/var/lib/mysql \
 -v /root/mysql4/config:/etc/mysql/conf.d \
 -e MYSQL_ROOT_PASSWORD=123456 \
 -e TZ=Asia/Shanghai --privileged=true \
 mysql:8.0.23 \
 --lower_case_table_names=1
 ```

### docker为容器固定ip

 ```shell
 docker network create --subnet=172.18.0.0/18 mynet
 // 默认172.18.0.1为网关地址
 ```

